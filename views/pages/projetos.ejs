<%- include('../partials/header') %>

<div class="projetos-container">
  <div class="projetos-header">
    <h1>Meus Projetos</h1>
    <a href="/cadastroProjeto" class="btn btn-primary">+ Novo Projeto</a>
  </div>

  <% if (projetos && projetos.length > 0) { %>
    <div class="projetos-grid">
      <% projetos.forEach(projeto => { %>
        <div class="projeto-card">
          <% if (projeto.foto) { %>
            <div class="projeto-image-container">
              <img src="<%= projeto.foto %>" alt="<%= projeto.titulo %>" class="projeto-image" onclick="this.style.maxHeight = this.style.maxHeight ? '' : '600px'; this.style.width = this.style.width ? '' : '100%';" title="Clique para expandir">
            </div>
          <% } else { %>
            <div class="projeto-image-container placeholder">
              <span>Sem imagem</span>
            </div>
          <% } %>

          <div class="projeto-content">
            <h3><%= projeto.titulo %></h3>
            <p class="descricao"><%= projeto.descricao %></p>

            <div class="projeto-info">
              <span class="badge badge-<%= projeto.status === 'concluido' ? 'concluido' : 'em andamento' %>">
                <%= projeto.status %>
              </span>
              <% if (projeto.tecnologias) { %>
                <p class="tecnologias"><strong>Tech:</strong> <%= projeto.tecnologias %></p>
              <% } %>
            </div>

            <div class="projeto-actions">
              <% if (projeto.link) { %>
                <a href="<%= projeto.link %>" target="_blank" class="btn btn-small">Ver</a>
              <% } %>
              <a href="/projetos/editar/<%= projeto.id %>" class="btn btn-small btn-edit">Editar</a>
              <form action="/projetos/deletar/<%= projeto.id %>" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-small btn-delete" onclick="return confirm('Tem certeza que deseja deletar este projeto?')">Deletar</button>
              </form>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  <% } else { %>
    <p>Nenhum projeto cadastrado. <a href="/cadastroProjeto">Criar agora</a></p>
  <% } %>
</div>

<%- include('../partials/footer') %>
